!function t(e,s,i){function n(r,o){if(!s[r]){if(!e[r]){var l="function"==typeof require&&require;if(!o&&l)return l(r,!0);if(a)return a(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var d=s[r]={exports:{}};e[r][0].call(d.exports,function(t){var s=e[r][1][t];return n(s?s:t)},d,d.exports,t,e,s,i)}return s[r].exports}for(var a="function"==typeof require&&require,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(t,e,s){"use strict";t("./modules/video"),$('[data-js="video-trans"]').videoTransitions({endText:"Ending text",transTime:1.5,startImage:"/media/images/start.png"})},{"./modules/video":7}],2:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(t,e){e.$captions=e.$wrap.find('[data-js="caption"]');var s=[];return null!==e.$captions?(e.$captions.each(function(e,i){var n=$(i);s[e]={},s[e].$element=n,s[e].start=n.data("start"),s[e].end=n.data("end"),t.setTransDuration(n)}),s):null};s["default"]=i},{}],3:[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(s,"__esModule",{value:!0});var n=t("./createCaptionsObject.js"),a=i(n),r=function(t){var e=[],s=void 0;return t.$videos.each(function(i,n){var r=$(n);e[i]=s={},s.$element=r,s.$wrap=s.$element.parent(),s.element=n,s.index=i,s.status="stopped",s.captions=(0,a["default"])(t,s),s.$fallback=s.$wrap.find('[data-js="fallback"]'),t.setTransDuration(s.$fallback),s.error=!1,t.setTransDuration(s.$wrap),s.$wrap.addClass(t.classDefault);var o=t.transitions.hasOwnProperty(t.transitionType)?t.transitions[t.transitionType].fn.bind(t):null;null===o&&(console.log("You have passed an unknown transition type "+t.transitionType+" - reverting to default of fade"),o=t.transitions["default"].fn.bind(t)),o(s)}),e};s["default"]=r},{"./createCaptionsObject.js":2}],4:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(t,e){var s={transitionType:"default",looping:!0,transTime:3,loopText:!1,startImage:!1,endText:!1,endImage:!1,restarted:!1,muted:!0,customTransitions:{}};return $.extend(s,t),s.startImage?e.prepend('<div data-js="startpoint" class="video-trans__startpoint--img" style="background-image: url(\''+s.startImage+"')\"><!--[a]--></div>"):!1,s.endImage?e.prepend('<div data-js="endpoint" class="video-trans__endpoint--img inactive"><!--[a]--></div>'):!1,s.endText?e.prepend('<h1 data-js="endpoint" class="video-trans__endpoint--text inactive">'+s.endText+"</h1>"):!1,s.start=$('[data-js="startpoint"]'),s.end=$('[data-js="endpoint"]'),s};s["default"]=i},{}],5:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(){var t=new $.Deferred;return t.promise(),"undefined"!=typeof Modernizr?!function(){var e=setTimeout(function(){t.resolve(!1)},3e3);Modernizr.videoautoplay?(clearTimeout(e),t.resolve(!0)):Modernizr.videoautoplay||"undefined"==typeof Modernizr.videoautoplay||t.resolve(!1),Modernizr.on("videoautoplay",function(s){Modernizr.videoautoplay=s,clearTimeout(e),s?t.resolve(!0):t.resolve(!1)})}():t.resolve(!0),t};s["default"]=i},{}],6:[function(t,e,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=function(t){var e={"default":{fn:t.events,classPlaying:"playing",classOut:"fadeOut",classDefault:"fader",property:"opacity",easing:"linear"},none:{fn:t.noTransition,classPlaying:"",classOut:"",classDefault:"",property:"",easing:""},spin:{fn:t.events,classPlaying:"playing",classOut:"spinOut",classDefault:"spinner",property:"all",easing:"ease-out"}};if($.extend(e,t.settings.customTransitions),t.settings.customTransitions)for(var s in t.settings.customTransitions){var i=$.extend({},e["default"]);e[s]=$.extend(i,e[s])}return e};s["default"]=i},{}],7:[function(t,e,s){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),r=t("./submodules/settings.js"),o=i(r),l=t("./submodules/transitions.js"),u=i(l),d=t("./submodules/tests.js"),c=i(d),f=t("./submodules/createVideosObject.js"),h=i(f),p="videoTransitions",v=function(){function t(e,s){var i=this;n(this,t),this.container=e,this.$container=$(this.container),this.settings=(0,o["default"])(s,this.$container),this.transitionType=this.settings.transitionType,this.transitions=(0,u["default"])(this),this.initTransClasses(),this.looping=this.settings.looping,this.$videos=this.$container.find("video"),this.$captions=this.$container.find('[data-js="caption"]'),this.videos=(0,h["default"])(this),$.when(c["default"]).done(function(t){t?i.passed():i.failed()})}return a(t,[{key:"initTransClasses",value:function(){this.transitions.hasOwnProperty(this.transitionType)?(this.classPlaying=this.transitions[this.transitionType].classPlaying,this.classOut=this.transitions[this.transitionType].classOut,this.classDefault=this.transitions[this.transitionType].classDefault):(this.classPlaying="",this.classOut="",this.classDefault="")}},{key:"passed",value:function(){var t=this;this.videos[0].element.readyState>=4?this.init():this.videos[0].$element.one("canplay",function(){t.init()})}},{key:"failed",value:function(){this.fallbackToCarousel()}},{key:"init",value:function(){this.settings.start.addClass("inactive");for(var t=0;t<Object.keys(this.videos).length;t++)this.videos[t].element.muted=this.settings.muted;this.playVideo(this.videos[0])}},{key:"setTransDuration",value:function(t){t[0].style.WebkitTransition=this.transitions[this.transitionType].property+" "+this.settings.transTime+"s "+this.transitions[this.transitionType].easing,t[0].style.MozTransition=this.transitions[this.transitionType].property+" "+this.settings.transTime+"s "+this.transitions[this.transitionType].easing}},{key:"events",value:function(t){var e=(t.element,t.$element);e.on("timeupdate",$.proxy(this.timing,this,t)),e.on("ended",$.proxy(this.endTransition,this,t)),e.on("error",$.proxy(this.videoError,this,t))}},{key:"noTransition",value:function(){console.log("no transitions being applied to videos")}},{key:"endTransition",value:function(t){t.status="stopped",t.$wrap.removeClass(this.classPlaying+" "+this.classOut),this.last(t)?this.ended():!1}},{key:"hideCaptions",value:function(t){t.each(function(t,e){$(e).addClass("inactive")})}},{key:"timing",value:function(t){var e=t.element;if(e.currentTime>e.duration-this.settings.transTime&&"transitioning"!=t.status?this.startTransition(t):!1,this.settings.restarted&!this.settings.looptext);else if(null!==t.captions)for(var s=0;s<=t.captions.length-1;s++){var i=t.captions[s].start,n=t.captions[s].end,a=t.captions[s].$element;i<=e.currentTime&&n>=e.currentTime&&a.removeClass("inactive"),n<=e.currentTime&!a.hasClass("inactive")&&a.addClass("inactive")}}},{key:"videoError",value:function(t){t.error=!0}},{key:"startTransition",value:function(t){t.status="transitioning";var e=this.nextVideo(t);t.$wrap.addClass(this.classOut),this.last(t)?this.ending():this.playVideo(e)}},{key:"last",value:function(t){return t.index===this.videos.length-1}},{key:"nextVideo",value:function(t){return this.videos[t.index+1]}},{key:"playVideo",value:function(t){t.element.play(),t.status="playing",t.$wrap.addClass(t.status)}},{key:"restart",value:function(){this.looping&&(this.settings.restarted=!0,this.init())}},{key:"ending",value:function(){this.settings.end?this.settings.end.removeClass("inactive"):!1}},{key:"ended",value:function(){this.settings.looping?this.restart():!1}},{key:"destroy",value:function(){for(var t=0;t<Object.keys(this.videos).length;t++)this.videos[t].element.pause(),this.videos[t].element.currentTime=0,this.videos[t].$wrap.removeClass(this.transitions[this.transitionType].classPlaying),delete this.videos[t];delete this.videos}},{key:"fallbackToCarousel",value:function(){Modernizr.video?this.initCarousel():this.ohGodItsOldIeRunForTheHills()}},{key:"initCarousel",value:function(){var t=this;this.createFallbackMarkup(),this.$fallbacksWrap=this.$container.find('[data-js="fallbackWrap"]'),this.$fallbacks=this.$fallbacksWrap.find('[data-js="fallback"]'),this.$firstFallback=this.$fallbacks.eq(0),setTimeout(function(){t.rotateCarousel(t.$firstFallback)},1e3*this.$firstFallback.data("duration"))}},{key:"createFallbackMarkup",value:function(){this.fallbacks=[];for(var t=0;t<Object.keys(this.videos).length;t++)this.fallbacks[this.videos[t].index]=this.videos[t].$fallback;this.$container.append('<div class="video-trans__fallback-wrap" data-js="fallbackWrap"></div>'),this.$fallbackWrap=$('[data-js="fallbackWrap"]');for(var t=0;t<Object.keys(this.fallbacks).length;t++)this.$fallbackWrap.append(this.fallbacks[t][0].outerHTML)}},{key:"rotateCarousel",value:function(t){var e=this,s=this.$fallbacksWrap.find(".playing"),i=t;i=s.index()===this.$fallbacks.length-1?this.$firstFallback:s.next(),s.removeClass("playing"),i.addClass("playing"),setTimeout(function(t){e.rotateCarousel(t)},1e3*i.data("duration"))}},{key:"ohGodItsOldIeRunForTheHills",value:function(){console.log("The dark times have come again.")}}]),t}();$.fn[p]=function(t){return this.each(function(){return $.data(this,"plugin_"+p)?void 0:$.data(this,"plugin_"+p,new v(this,t))})}},{"./submodules/createVideosObject.js":3,"./submodules/settings.js":4,"./submodules/tests.js":5,"./submodules/transitions.js":6}]},{},[1]);