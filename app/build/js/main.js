!function t(e,i,s){function n(o,r){if(!i[o]){if(!e[o]){var l="function"==typeof require&&require;if(!r&&l)return l(o,!0);if(a)return a(o,!0);var u=new Error("Cannot find module '"+o+"'");throw u.code="MODULE_NOT_FOUND",u}var d=i[o]={exports:{}};e[o][0].call(d.exports,function(t){var i=e[o][1][t];return n(i?i:t)},d,d.exports,t,e,i,s)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<s.length;o++)n(s[o]);return n}({1:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}return function(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}}(),o=t("./modules/settings.js"),r=s(o),l=t("./modules/transitions.js"),u=s(l),d=t("./modules/tests.js"),c=s(d),f=t("./modules/createVideosObject.js"),h=s(f),p="videoTrans",v=function(){function t(e,i){var s=this;n(this,t),this.container=e,this.$container=$(this.container),this.settings=(0,r["default"])(i,this.$container),this.transitionType=this.settings.transitionType,this.transitions=(0,u["default"])(this),this.initTransClasses(),this.looping=this.settings.looping,this.$videos=this.$container.find("video"),this.$captions=this.$container.find('[data-js="caption"]'),this.videos=(0,h["default"])(this),(0,c["default"])().done(function(t){t?s.passed():s.failed()})}return a(t,[{key:"initTransClasses",value:function(){this.transitions.hasOwnProperty(this.transitionType)?(this.classPlaying=this.transitions[this.transitionType].classPlaying,this.classOut=this.transitions[this.transitionType].classOut,this.classDefault=this.transitions[this.transitionType].classDefault):(this.classPlaying="",this.classOut="",this.classDefault="")}},{key:"passed",value:function(){var t=this;this.videos[0].element.readyState>=4?this.init():this.videos[0].$element.one("canplay",function(){t.init()})}},{key:"failed",value:function(){this.fallbackToCarousel(),Modernizr&&(Modernizr.videoautoplay=!1),$("html").addClass("no-videoautoplay")}},{key:"init",value:function(){this.settings.start.addClass("inactive");for(var t=0;t<Object.keys(this.videos).length;t++)this.videos[t].element.muted=this.settings.muted;this.playVideo(this.videos[0])}},{key:"setTransDuration",value:function(t){t[0].style.WebkitTransition=this.transitions[this.transitionType].property+" "+this.settings.transTime+"s "+this.transitions[this.transitionType].easing,t[0].style.MozTransition=this.transitions[this.transitionType].property+" "+this.settings.transTime+"s "+this.transitions[this.transitionType].easing}},{key:"events",value:function(t){var e=(t.element,t.$element);e.on("timeupdate",$.proxy(this.timing,this,t)),e.on("ended",$.proxy(this.endTransition,this,t)),e.on("error",$.proxy(this.videoError,this,t))}},{key:"noTransition",value:function(){console.log("no transitions being applied to videos")}},{key:"endTransition",value:function(t){t.status="stopped",t.$wrap.removeClass(this.classPlaying+" "+this.classOut),this.last(t)?this.ended():!1}},{key:"hideCaptions",value:function(t){t.each(function(t,e){$(e).addClass("inactive")})}},{key:"timing",value:function(t){var e=t.element;if(e.currentTime>e.duration-this.settings.transTime&&"transitioning"!=t.status?this.startTransition(t):!1,this.settings.restarted&!this.settings.looptext);else if(null!==t.captions)for(var i=0;i<=t.captions.length-1;i++){var s=t.captions[i].start,n=t.captions[i].end,a=t.captions[i].$element;s<=e.currentTime&&n>=e.currentTime&&a.removeClass("inactive"),n<=e.currentTime&!a.hasClass("inactive")&&a.addClass("inactive")}}},{key:"videoError",value:function(t){t.error=!0}},{key:"startTransition",value:function(t){t.status="transitioning";var e=this.nextVideo(t);t.$wrap.addClass(this.classOut),this.last(t)?this.ending():this.playVideo(e)}},{key:"last",value:function(t){return t.index===this.videos.length-1}},{key:"nextVideo",value:function(t){return this.videos[t.index+1]}},{key:"playVideo",value:function(t){t.element.play(),t.status="playing",t.$wrap.addClass(t.status)}},{key:"restart",value:function(){this.looping&&(this.settings.restarted=!0,this.init())}},{key:"ending",value:function(){this.settings.end?this.settings.end.removeClass("inactive"):!1}},{key:"ended",value:function(){this.settings.looping?this.restart():!1}},{key:"destroy",value:function(){if(this.videos){for(var t=0;t<Object.keys(this.videos).length;t++)this.videos[t].element.pause(),this.videos[t].element.currentTime=0,this.videos[t].$wrap.removeClass(this.transitions[this.transitionType].classPlaying),delete this.videos[t];delete this.videos}}},{key:"fallbackToCarousel",value:function(){Modernizr.video?this.initCarousel():this.ohGodItsOldIeRunForTheHills()}},{key:"initCarousel",value:function(){var t=this;this.createFallbackMarkup(),this.$fallbacksWrap=this.$container.find('[data-js="fallbackWrap"]'),this.$fallbacks=this.$fallbacksWrap.find('[data-js="fallback"]'),this.$firstFallback=this.$fallbacks.eq(0),setTimeout(function(){t.rotateCarousel(t.$firstFallback)},1e3*this.$firstFallback.data("duration"))}},{key:"createFallbackMarkup",value:function(){this.fallbacks=[];for(var t=0;t<Object.keys(this.videos).length;t++)this.fallbacks[this.videos[t].index]=this.videos[t].$fallback;this.$container.append('<div class="video-trans__fallback-wrap" data-js="fallbackWrap"></div>'),this.$fallbackWrap=$('[data-js="fallbackWrap"]');for(var t=0;t<Object.keys(this.fallbacks).length;t++)this.$fallbackWrap.append(this.fallbacks[t][0].outerHTML)}},{key:"rotateCarousel",value:function(t){var e=this,i=this.$fallbacksWrap.find(".playing"),s=t;s=i.index()===this.$fallbacks.length-1?this.$firstFallback:i.next(),i.removeClass("playing"),s.addClass("playing"),setTimeout(function(t){e.rotateCarousel(t)},1e3*s.data("duration"))}},{key:"ohGodItsOldIeRunForTheHills",value:function(){console.log("The dark times have come again.")}}]),t}();$.fn[p]=function(t){return this.each(function(){return $.data(this,"plugin_"+p)?void 0:$.data(this,"plugin_"+p,new v(this,t))})}},{"./modules/createVideosObject.js":3,"./modules/settings.js":4,"./modules/tests.js":5,"./modules/transitions.js":6}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t,e){e.$captions=e.$wrap.find('[data-js="caption"]');var i=[];return null!==e.$captions?(e.$captions.each(function(e,s){var n=$(s);i[e]={},i[e].$element=n,i[e].start=n.data("start"),i[e].end=n.data("end"),t.setTransDuration(n)}),i):null};i["default"]=s},{}],3:[function(t,e,i){"use strict";function s(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(i,"__esModule",{value:!0});var n=t("./createCaptionsObject.js"),a=s(n),o=function(t){var e=[],i=void 0;return t.$videos.each(function(s,n){var o=$(n);e[s]=i={},i.$element=o,i.$wrap=i.$element.parent(),i.element=n,i.index=s,i.status="stopped",i.captions=(0,a["default"])(t,i),i.$fallback=i.$wrap.find('[data-js="fallback"]'),t.setTransDuration(i.$fallback),i.error=!1,t.setTransDuration(i.$wrap),i.$wrap.addClass(t.classDefault);var r=t.transitions.hasOwnProperty(t.transitionType)?t.transitions[t.transitionType].fn.bind(t):null;null===r&&(console.log("You have passed an unknown transition type "+t.transitionType+" - reverting to default of fade"),r=t.transitions["default"].fn.bind(t)),r(i)}),e};i["default"]=o},{"./createCaptionsObject.js":2}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t,e){var i={transitionType:"default",looping:!0,transTime:3,loopText:!1,startImage:!1,endText:!1,endImage:!1,restarted:!1,muted:!0,customTransitions:{}};return $.extend(i,t),i.startImage?e.prepend('<div data-js="startpoint" class="video-trans__startpoint--img" style="background-image: url(\''+i.startImage+"')\"><!--[a]--></div>"):!1,i.endImage?e.prepend('<div data-js="endpoint" class="video-trans__endpoint--img inactive"><!--[a]--></div>'):!1,i.endText?e.prepend('<h1 data-js="endpoint" class="video-trans__endpoint--text inactive">'+i.endText+"</h1>"):!1,i.start=$('[data-js="startpoint"]'),i.end=$('[data-js="endpoint"]'),i};i["default"]=s},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){var t=new $.Deferred;return t.promise(),"undefined"!=typeof Modernizr?!function(){var e=setTimeout(function(){t.resolve(!1)},3e3);Modernizr.videoautoplay?(clearTimeout(e),t.resolve(!0)):Modernizr.videoautoplay||"undefined"==typeof Modernizr.videoautoplay||t.resolve(!1),Modernizr.on("videoautoplay",function(i){Modernizr.videoautoplay=i,clearTimeout(e),i?t.resolve(!0):t.resolve(!1)})}():t.resolve(!0),t};i["default"]=s},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(t){var e={"default":{fn:t.events,classPlaying:"playing",classOut:"fadeOut",classDefault:"fader",property:"opacity",easing:"linear"},none:{fn:t.noTransition,classPlaying:"",classOut:"",classDefault:"",property:"",easing:""},spin:{fn:t.events,classPlaying:"playing",classOut:"spinOut",classDefault:"spinner",property:"all",easing:"ease-out"}};if($.extend(e,t.settings.customTransitions),t.settings.customTransitions)for(var i in t.settings.customTransitions){var s=$.extend({},e["default"]);e[i]=$.extend(s,e[i])}return e};i["default"]=s},{}]},{},[1]);